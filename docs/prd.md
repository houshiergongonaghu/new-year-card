1. 项目概述这是一个基于 Web 的节日贺卡生成器 MVP。用户上传一张个人照片，系统利用 AI 将其重绘为“手绘水彩风格”的节日插画，用户可以在前端添加祝福语（使用优美的手写字体），最后通过邮件将贺卡发送给朋友。核心目标： 极简操作、高审美 AI 重绘、低成本运行、具备病毒传播属性。2. 技术栈 (Tech Stack)前端框架: Next.js 14+ (App Router), React样式库: Tailwind CSS, Lucide React (图标)字体: Google Fonts (必须包含 Great Vibes 或 Caveat 用于手写文字)后端/数据库: Supabase (用于 Postgres 数据库存储贺卡信息 + Storage 存储图片)AI 图像生成: Replicate API (模型建议: black-forest-labs/flux-schnell 或类似快速模型)邮件服务: Resend3. 详细功能阶段 (Development Phases)阶段一：UI 与 氛围感构建 (Frontend & Vibe)页面风格: 参考节日温馨主题，背景采用粉紫色渐变（Gradient Pink/Purple），配合节日装饰元素。响应式布局: 移动端优先。桌面端: 左侧为贺卡预览区（Canvas），右侧为表单操作区。移动端: 顶部展示贺卡，底部展示表单。字体要求: 全站标题使用衬线体（Serif），贺卡上的祝福语必须使用 Google Font Great Vibes 或 Caveat，营造手写感。阶段二：AI 核心生成与限流 (AI Generation)图片上传: 用户上传本地图片。IP 限流 (关键): 在调用 Replicate API 之前，必须检查用户 IP。规则: 每个 IP 每 24 小时最多生成 2 张。交互: 如果超限，禁用“生成”按钮并提示“今日免费额度已用完”。AI 处理:调用 Replicate 的 Image-to-Image 接口。Prompt (硬编码): 强制使用类似 "Watercolor Christmas illustration style, festive, warm, masterpiece" 的提示词，不提供风格选项给用户。Strength: 设置合适的去噪强度（如 0.6 - 0.75），保留原图轮廓但改变风格。阶段三：合成与存储 (Synthesis & Supabase)前端合成 (Canvas):当 AI 图片返回后，在前端使用 <canvas> 绘制该图片。将用户输入的 Message 和 Sender Name 绘制在图片底部或留白处。关键点: 绘制文字时，应用 Great Vibes 或 Caveat 字体，颜色需与画面和谐（如深红或墨绿）。存储流程:将 Canvas 内容导出为 Blob/File。上传至 Supabase Storage (Bucket: cards)，获取公开 URL。将贺卡元数据写入 Supabase Database (Table: cards)。阶段四：交付与回流 (Delivery & Growth)邮件发送: 调用 Resend API 发送邮件。内容模板：“{Sender} 为你制作了一张专属贺卡，点击查看：{Link}”查看页 (/card/[id]):设计: 必须复用主页的节日 CSS 风格，提供沉浸式体验。展示: 居中展示最终的合成大图。病毒传播 (CTA): 图片下方放置一个显眼的按钮 —— "我也要做一张 (Make My Own)"，点击跳转回首页。4. 数据结构 (Database Schema)请在 Supabase 中创建以下表结构：Table: cardsColumn NameTypeDescriptionidUUIDPrimary Key, default: gen_random_uuid()image_urlTextSupabase Storage 中的完整图片链接sender_nameText发送人昵称recipient_nameText收件人昵称messageText祝福语内容created_atTimestamptzdefault: now()无需用户登录系统 (Auth)，直接通过 ID 访问。5. 环境变量 (Environment Variables)需要在 .env.local 中配置：代码段NEXT_PUBLIC_SUPABASE_URL=...
NEXT_PUBLIC_SUPABASE_ANON_KEY=...
REPLICATE_API_TOKEN=...
RESEND_API_KEY=...
6. 给 Claude 的开发指令 (Implementation Steps)请按以下顺序编写代码：Setup: 初始化项目，配置 Tailwind，引入 Google Fonts (Great Vibes, Inter)，初始化 Supabase 客户端。Database: 提供 SQL 语句以在 Supabase 中创建表和 Storage Bucket 策略。UI Component: 构建主页布局，重点实现 Canvas 组件（用于后续的图片合成）。Backend API:编写 API Route 处理 AI 生成请求（包含 IP 限流逻辑）。编写 Server Action 处理数据库存入和邮件发送。Integration: 联调“上传 -> 生图 -> Canvas合成 -> 上传Supabase -> 发邮件”的全链路。